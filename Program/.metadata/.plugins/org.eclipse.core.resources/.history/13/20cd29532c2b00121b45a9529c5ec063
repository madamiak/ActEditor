package pl.wroc.pwr.student.acteditor.parsing.xsd;

import java.util.ArrayList;
import java.util.List;

import pl.wroc.pwr.student.acteditor.model.Schema;

public class Tester {
	static String text = Schema.getSchemaContent();
//	static List<String> elements = new ArrayList<String>();
//	static List<String> attributes = new ArrayList<String>();
//	static List<String> attsGroup = new ArrayList<String>();
//	static List<String> cTypes = new ArrayList<String>();
	static List<Element> elements = new ArrayList<Element>();
	
	public static Element getElementByName(String name) {
		for(Element e : elements) {
			if(e.getName().equals(name)) {
				return e;
			}
		}
		return null;
	}

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		String[] lines = text.split("\n");
		XSDParser parser = new XSDParser(text);
		XSDHelper helper = new XSDHelper(lines);
		
		for(String each : lines) {
			if(each.contains("<xsd:element name=")) {
				Composition e = new Composition();
				e.setName(each.substring(each.indexOf("name") + "name=\"".length(), each.indexOf("\"", each.indexOf("name") + "name=\"".length())));
				elements.add(e);
			}
		}
		
		boolean flag = false;
		for(Element e : elements) {
			System.out.println(e.getName().toUpperCase());
			String[] a = parser.getElementStructure(e.getName());
			
			for(String s : a) {
				if(s.contains("documentation")) {
					e.setDescription(s.substring(s.indexOf(">") + 1, s.lastIndexOf("<")));
				}
				
				if(s.contains("ref")) {
					int beginIndex = s.indexOf("ref") + "ref=\"".length();
					int endIndex = s.indexOf("\"", s.indexOf("ref=") + "ref=\"".length());
					String name = s.substring(beginIndex, endIndex);
					Element e1 = new SimpleElement(name);
					e.add(e1);
				}
			}
//		for(String each : lines) {
//			if(each.contains("<xsd:element") && !each.contains("name")) {
//				if(each.contains("ref=")) {
//					Composition el;
//					int beginIndex = each.indexOf("ref=") + "ref=\"".length();
//					int endIndex = each.indexOf("\"", each.indexOf("ref=") + "ref=\"".length());
//					String name = each.substring(beginIndex, endIndex);
//					System.out.println(name);
//				}
//			}
		}
		
		for(Element e : elements) {
			System.out.println(e);
		}
		
//		helper.function();
//		
//		for(String each : lines) {
//			if(each.contains("<xsd:element name=")) {
//				elements.add(each);
//				continue;
//			}
//			
//			if(each.contains("<xsd:attribute name=")) {
//				attributes.add(each);
//				continue;
//			}
//			
//			if(each.contains("<xsd:attributeGroup name=")) {
//				attsGroup.add(each);
//				continue;
//			}
//			
//			if(each.contains("<xsd:complexType name=")) {
//				cTypes.add(each);
//				continue;
//			}
//		}
//
//		
//		for(String s : elements) {
//			System.out.println(s);
//		}
//		
//		for(String s : attributes) {
//			System.out.println(s);
//		}
//		
//		for(String s : attsGroup) {
//			System.out.println(s);
//		}
//		
//		for(String s : cTypes) {
//			System.out.println(s);
//		}
	}

}
