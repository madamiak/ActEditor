package pl.wroc.pwr.student.acteditor.parsing;

import java.util.ArrayList;
import java.util.List;

public class XSDParser implements Parser {
	private String xsdContent;
	private String[] xsdLines;
	
	public XSDParser(String xsdContent) {
		this.xsdContent = xsdContent;
	}
	
	public String[] getElement(String elementName) {
		List<String> result = new ArrayList<String>();
		boolean read = false;
		String pattern = "";
		
		if(xsdLines == null) {
			xsdLines = xsdContent.split("\n");
		}
		
		for(int i = 0; i < xsdLines.length; i++) {
			String currentLine = xsdLines[i].substring(xsdLines[i].indexOf("<"));
			if(currentLine.contains("element name=\"" + elementName)) {
				read = true;
				pattern = currentLine.split(" ")[0];
				System.out.println(currentLine);
				result.add(currentLine);
				continue;
			}
			
			if(read == true) {
				String tmp = pattern.replaceAll("<", "</") + ">";
				if(currentLine.equals(tmp)) {
					read = false;
				}
				System.out.println(currentLine);
				result.add(currentLine);
			}			
		}

		String[] tmp = {};
		result.toArray(tmp);
		
		return tmp;
	}
}
